{% load i18n allauth %}
{% if not SOCIALACCOUNT_ONLY %}
    {% url 'account_signup' as action_url %}
    <form method="post"
          action="{{ action_url }}"
          class="w3-container w3-padding-16"
          aria-labelledby="signup-form-heading">
        {% csrf_token %}
        <h2 id="signup-form-heading" class="w3-large w3-text-brown w3-margin-bottom">
            {% trans "Use your details to sign up" %}
        </h2>
        {% if form.non_field_errors %}
            <div class="w3-panel w3-border w3-border-red w3-pale-red" role="alert" aria-live="polite">
                <p class="w3-text-red w3-margin-top w3-margin-bottom">{{ form.non_field_errors|join:" " }}</p>
            </div>
        {% endif %}
        {% for hidden in form.hidden_fields %}
            {{ hidden }}
        {% endfor %}
        {% for field in form.visible_fields %}
            <div class="w3-section">
                <label for="{{ field.id_for_label }}" class="w3-text-dark-grey w3-small w3-uppercase">
                    {{ field.label }}
                </label>
                {{ field.as_widget(attrs={'class': 'w3-input w3-border w3-round-large', 'placeholder': field.label}) }}
                {% if field.errors %}
                    <div class="w3-text-red w3-small" role="alert">
                        {{ field.errors|join:" " }}
                    </div>
                {% endif %}
                {% if field.help_text %}
                    <p class="w3-small w3-text-gray">{{ field.help_text }}</p>
                {% endif %}
            </div>
        {% endfor %}
        {{ redirect_field }}
        <button type="submit" class="w3-button w3-green w3-round-xlarge w3-block w3-padding-large">
            <span class="fa-solid fa-user-plus" aria-hidden="true"></span>
            <span class="w3-margin-left">{% trans "Create account" %}</span>
        </button>
    </form>
{% endif %}

{% if PASSKEY_SIGNUP_ENABLED %}
    <div class="w3-section">
        {% element button href=signup_by_passkey_url tags="prominent,signup,outline,primary" class="w3-button w3-border w3-round-large w3-white w3-block" %}
            {% trans "Sign up using a passkey" %}
        {% endelement %}
    </div>
{% endif %}

{% if SOCIALACCOUNT_ENABLED %}
    {% include "socialaccount/snippets/login.html" with page_layout="entrance" %}
{% endif %}

{% setvar link %}
    <a href="{{ login_url }}" class="w3-text-brown w3-hover-text-black">
{% endsetvar %}
{% setvar end_link %}
    </a>
{% endsetvar %}
<p class="w3-small w3-center w3-margin-top">
    {% blocktranslate %}Already have an account? {{ link }}Sign In{{ end_link }}.{% endblocktranslate %}
</p>
