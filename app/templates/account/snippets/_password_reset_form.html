{% load i18n allauth account %}
<div class="w3-padding-large">
    <h2 class="w3-large w3-text-brown w3-margin-bottom">
        {% trans "Request a password reset" %}
    </h2>
    {% if user.is_authenticated %}
        {% include "account/snippets/already_logged_in.html" %}
    {% endif %}
    <p class="w3-text-gray w3-small w3-margin-bottom">
        {% trans "Enter the email linked to your NMK account and we'll send you reset instructions." %}
    </p>
    {% url 'account_reset_password' as reset_url %}
    <form method="post" action="{{ reset_url }}" class="w3-container w3-padding-16" aria-label="{% trans 'Password reset form' %}">
        {% csrf_token %}
        {% for hidden in form.hidden_fields %}
            {{ hidden }}
        {% endfor %}
        {% for field in form.visible_fields %}
            <div class="w3-section">
                <label for="{{ field.id_for_label }}" class="w3-text-dark-grey w3-small w3-uppercase">
                    {{ field.label }}
                </label>
                {{ field.as_widget(attrs={'class': 'w3-input w3-border w3-round-large', 'placeholder': field.label}) }}
                {% if field.errors %}
                    <div class="w3-text-red w3-small" role="alert">
                        {{ field.errors|join:" " }}
                    </div>
                {% endif %}
                {% if field.help_text %}
                    <p class="w3-small w3-text-gray">{{ field.help_text }}</p>
                {% endif %}
            </div>
        {% endfor %}
        <button type="submit" class="w3-button w3-brown w3-round-xlarge w3-block w3-padding-large">
            <span class="fa-solid fa-envelope" aria-hidden="true"></span>
            <span class="w3-margin-left">{% trans "Send reset link" %}</span>
        </button>
    </form>
    <p class="w3-small w3-text-gray w3-margin-top">
        {% blocktrans %}Please contact us if you have any trouble resetting your password.{% endblocktrans %}
    </p>
</div>
