{% extends "base_generic.html" %}
{% load i18n %}

{% block title %}
  {% blocktrans with accession=accessionrow.accession %}Print small specimen card for {{ accession }}{% endblocktrans %}
{% endblock %}

{% block script %}
  {{ block.super }}
  <style>
    .print-layout {
      max-width: 760px;
    }

    .print-card {
      border: 1px solid #ccc;
      padding: 1rem;
      font-size: 0.95rem;
    }

    .print-card__header {
      display: flex;
      justify-content: space-between;
      align-items: flex-start;
      gap: 0.75rem;
      flex-wrap: wrap;
      margin-bottom: 1rem;
    }

    .print-card__title {
      margin: 0;
    }

    .print-card__meta {
      margin: 0;
      color: #555;
      font-size: 0.9rem;
    }

    .print-card__qr {
      display: flex;
      align-items: flex-start;
      justify-content: flex-end;
      margin-left: auto;
      min-width: 96px;
    }

    .print-card__qr canvas,
    .print-card__qr img {
      width: 96px !important;
      height: 96px !important;
    }

    .print-actions {
      display: flex;
      justify-content: flex-end;
      margin-bottom: 1rem;
    }

    .print-summary {
      width: 100%;
      border-collapse: collapse;
      font-size: 0.9rem;
    }

    .print-summary th,
    .print-summary td {
      border: 1px solid #ccc;
      padding: 0.5rem;
      vertical-align: top;
    }

    .print-summary th {
      background-color: #f3f3f3;
      text-transform: uppercase;
      letter-spacing: 0.05em;
      font-size: 0.75rem;
    }

    .print-summary__label--narrow {
      width: 22%;
    }

    .print-summary__value-muted {
      color: #777;
    }

    .print-elements-table {
      width: 100%;
      border-collapse: collapse;
    }

    .print-elements-table th,
    .print-elements-table td {
      border: 1px solid #e0e0e0;
      padding: 0.4rem;
      text-align: left;
      font-size: 0.85rem;
    }

    .print-elements-table th {
      background-color: #f9f9f9;
      text-transform: uppercase;
      letter-spacing: 0.04em;
      font-size: 0.72rem;
    }

    .print-list {
      margin: 0;
      padding-left: 1.25rem;
    }

    .print-list li {
      margin-bottom: 0.25rem;
    }

    @media (max-width: 640px) {
      .print-summary th,
      .print-summary td {
        padding: 0.4rem;
      }

      .print-actions {
        justify-content: center;
      }

      .print-card__qr {
        min-width: 80px;
      }

      .print-card__qr canvas,
      .print-card__qr img {
        width: 80px !important;
        height: 80px !important;
      }
    }

    @media print {
      body {
        margin: 0;
      }

      .site-header,
      #primary-navigation,
      #nav-toggle,
      .site-footer,
      .print-actions {
        display: none !important;
      }

      .print-layout {
        margin: 0;
        max-width: none;
      }

      .print-card {
        box-shadow: none;
        border: 1px solid #000;
      }

      .print-summary th,
      .print-summary td {
        border-color: #000;
      }
    }
  </style>
  <script>
    /* qrcodejs v1.0.0 | MIT | https://github.com/davidshimjs/qrcodejs */
        !(function(){function h(a){this.mode=c.MODE_8BIT_BYTE;this.data=a}function i(a,c){this.typeNumber=a;this.errorCorrectLevel=c;this.modules=null;this.moduleCount=0;this.dataCache=null;this.dataList=[]}function j(a,c){if(void 0==a.length)throw Error(a.length+"/"+typeof a);for(var b=0;b<a.length&&0==a[b];)b++;this.num=Array(a.length-b+c);for(var d=0;d<a.length-b;d++)this.num[d]=a[d+b]}function k(a,c){this.totalCount=a;this.dataCount=c}function l(){var a=!1,c=navigator.userAgent;if(/android/i.test(c)){a=!0;var b=/android ([0-9\.]+)/i.exec(c);if(!(b&&3<=parseFloat(b[1])))return!1}return a}h.prototype={getLength:function(){return this.data.length},write:function(a){for(var c=0;c<this.data.length;c++)a.put(this.data.charCodeAt(c),8)}};i.prototype={addData:function(a){this.dataList.push(new h(a));this.dataCache=null},isDark:function(a,c){if(0>a||this.moduleCount<=a||0>c||this.moduleCount<=c)throw Error(a+","+c);return this.modules[a][c]},getModuleCount:function(){return this.moduleCount},make:function(){this.makeImpl(!1,this.getBestMaskPattern())},makeImpl:function(a,c){this.moduleCount=4*this.typeNumber+17;this.modules=Array(this.moduleCount);for(var b=0;b<this.moduleCount;b++){this.modules[b]=Array(this.moduleCount);for(var d=0;d<this.moduleCount;d++)this.modules[b][d]=null}this.setupPositionProbePattern(0,0);this.setupPositionProbePattern(this.moduleCount-7,0);this.setupPositionProbePattern(0,this.moduleCount-7);this.setupPositionAdjustPattern();this.setupTimingPattern();this.setupTypeInfo(a,c);7<=this.typeNumber&&this.setupTypeNumber(a);null==this.dataCache&&(this.dataCache=i.createData(this.typeNumber,this.errorCorrectLevel,this.dataList));this.mapData(this.dataCache,c)},setupPositionProbePattern:function(a,c){for(var b=-1;7>=b;b++)if(!(0>a+b||this.moduleCount<=a+b))for(var d=-1;7>=d;d++)0>c+d||this.moduleCount<=c+d||(this.modules[a+b][c+d]=0<=b&&b<=6&&(0==d||6==d)||0<=d&&d<=6&&(0==b||6==b)||2<=b&&b<=4&&2<=d&&d<=4)},getBestMaskPattern:function(){for(var a=0,c=0,b=0;8>b;b++){this.makeImpl(!0,b);var d=f.getLostPoint(this);if(0==b||a>d)a=d,c=b}return c},createMovieClip:function(a,c,b){a=a.createEmptyMovieClip(c,b);this.make();for(c=0;c<this.modules.length;c++)for(var b=1*c,d=0;d<this.modules[c].length;d++){var e=1*d;this.modules[c][d]&&(a.beginFill(0,100),a.moveTo(e,b),a.lineTo(e+1,b),a.lineTo(e+1,b+1),a.lineTo(e,b+1),a.endFill())}return a},setupTimingPattern:function(){for(var a=8;a<this.moduleCount-8;a++)null==this.modules[a][6]&&(this.modules[a][6]=0==a%2);for(a=8;a<this.moduleCount-8;a++)null==this.modules[6][a]&&(this.modules[6][a]=0==a%2)},setupPositionAdjustPattern:function(){for(var a=f.getPatternPosition(this.typeNumber),c=0;c<a.length;c++)for(var b=0;b<a.length;b++){var d=a[c],e=a[b];if(null==this.modules[d][e])for(var g=-2;2>=g;g++)for(var h=-2;2>=h;h++)this.modules[d+g][e+h]=-2==g||2==g||-2==h||2==h||0==g&&0==h}},setupTypeNumber:function(a){for(var c=f.getBCHTypeNumber(this.typeNumber),b=0;18>b;b++){var d=!a&&1==(c>>b&1);this.modules[Math.floor(b/3)][b%3+this.moduleCount-8-3]=d}for(b=0;18>b;b++)d=!a&&1==(c>>b&1),this.modules[b%3+this.moduleCount-8-3][Math.floor(b/3)]=d},setupTypeInfo:function(a,c){for(var b=f.getBCHTypeInfo(this.errorCorrectLevel<<3|c),d=0;15>d;d++){var e=!a&&1==(b>>d&1);6>d?this.modules[d][8]=e:8==d?this.modules[d+1][8]=e:this.modules[this.moduleCount-15+d][8]=e}for(d=0;15>d;d++)e=!a&&1==(b>>d&1),8>d?this.modules[8][this.moduleCount-d-1]=e:8==d?this.modules[8][15-d-1]=e:this.modules[8][15-d-1]=e;this.modules[this.moduleCount-8][8]=!a},mapData:function(a,c){for(var b=-1,d=this.moduleCount-1,e=7,g=0,h=this.moduleCount-1;0<h;h-=2)for(6==h&&h--;;){for(var i=0;2>i;i++)if(null==this.modules[d][h-i]){var l=!1;g<a.length&&(l=1==(a[g]>>>e&1));f.getMask(c,d,h-i)&&(l=!l);this.modules[d][h-i]=l;e--; -1==e&&(g++,e=7)}d+=b;if(0>d||this.moduleCount<=d){d-=b;b=-b;break}}}};i.PAD0=236;i.PAD1=17;i.createData=function(a,c,b){var d=k.getRSBlocks(a,c),e=new g;for(c=0;c<b.length;c++){var h=b[c];e.put(h.mode,4);e.put(h.getLength(),f.getLengthInBits(h.mode,a));h.write(e)}a=0;for(c=0;c<d.length;c++)a+=d[c].dataCount;if(e.getLengthInBits()>8*a)throw Error("code length overflow. ("+e.getLengthInBits()+">"+8*a+")");for(e.getLengthInBits()+4<=8*a&&e.put(0,4);0!=e.getLengthInBits()%8;)e.putBit(!1);for(;!(e.getLengthInBits()>=8*a);){e.put(i.PAD0,8);if(e.getLengthInBits()>=8*a)break;e.put(i.PAD1,8)}return i.createBytes(e,d)};i.createBytes=function(a,c){for(var b=0,d=0,e=0,g=Array(c.length),h=Array(c.length),i=0;i<c.length;i++){var k=c[i].dataCount,l=c[i].totalCount-k;d=Math.max(d,k);e=Math.max(e,l);g[i]=Array(k);for(var m=0;m<g[i].length;m++)g[i][m]=255&a.buffer[m+b];b+=k;k=f.getErrorCorrectPolynomial(l);k=a.buffer.slice(0,g[i].length).concat(k);k=f.getErrorCorrectPolynomial(l).multiply(new j(k,g[i].length));k=k.getRemainder();h[i]=Array(l);for(m=0;m<h[i].length;m++)h[i][m]=k.num[m]}a=0;for(b=0;b<c.length;b++)a+=c[b].totalCount;var n=Array(a),p=0;for(m=0;m<d;m++)for(i=0;i<c.length;i++)m<g[i].length&&(n[p++]=g[i][m]);for(m=0;m<e;m++)for(i=0;i<c.length;i++)m<h[i].length&&(n[p++]=h[i][m]);return n};var f={PATTERN_POSITION_TABLE:[[],[6,18],[6,22],[6,26],[6,30],[6,34],[6,22,38],[6,24,42],[6,26,46],[6,28,50],[6,30,54],[6,32,58],[6,34,62],[6,26,46,66],[6,26,48,70],[6,26,50,74],[6,30,54,78],[6,30,56,82],[6,30,58,86],[6,34,62,90],[6,28,50,72,94],[6,26,50,74,98],[6,30,54,78,102],[6,28,54,80,106],[6,32,58,84,110],[6,30,58,86,114],[6,34,62,90,118],[6,26,50,74,98,122],[6,30,54,78,102,126],[6,26,52,78,104,130],[6,30,56,82,108,134],[6,34,60,86,112,138],[6,30,58,86,114,142],[6,34,62,90,118,146],[6,30,54,78,102,126,150],[6,24,50,76,102,128,154],[6,28,54,80,106,132,158],[6,32,58,84,110,136,162],[6,26,54,82,110,138,166],[6,30,58,86,114,142,170]],G15:1335,G18:7973,G15_MASK:21522,getBCHTypeInfo:function(a){for(var c=a<<10;0<=f.getBCHDigit(c)-f.getBCHDigit(f.G15);)c^=f.G15<<f.getBCHDigit(c)-f.getBCHDigit(f.G15);return a<<10|c},getBCHTypeNumber:function(a){for(var c=a<<12;0<=f.getBCHDigit(c)-f.getBCHDigit(f.G18);)c^=f.G18<<f.getBCHDigit(c)-f.getBCHDigit(f.G18);return a<<12|c},getBCHDigit:function(a){for(var c=0;0!=a;)c++,a>>=1;return c},getPatternPosition:function(a){return f.PATTERN_POSITION_TABLE[a-1]},getMask:function(a,c,b){switch(a){case 0:return 0==(c+b)%2;case 1:return 0==c%2;case 2:return 0==b%3;case 3:return 0==(c+b)%3;case 4:return 0==(Math.floor(c/2)+Math.floor(b/3))%2;case 5:return 0==c*b%2+c*b%3;case 6:return 0==(c*b%2+c*b%3)%2;case 7:return 0==(c*b%3+(c+b)%2)%2;default:throw Error("bad maskPattern:"+a);}},getErrorCorrectPolynomial:function(a){for(var c=new j([1],0),b=0;b<a;b++)c=c.multiply(new j([1,e.gexp(b)],0));return c},getLengthInBits:function(a,c){if(1<=c&&10>c)switch(a){case 1:return 10;case 2:return 9;case 4:return 8;case 8:return 8;default:throw Error("mode:"+a);}else if(27>c)switch(a){case 1:return 12;case 2:return 11;case 4:return 16;case 8:return 10;default:throw Error("mode:"+a);}else if(41>c)switch(a){case 1:return 14;case 2:return 13;case 4:return 16;case 8:return 12;default:throw Error("mode:"+a);}else throw Error("typeNumber:"+c);},getLostPoint:function(a){for(var c=a.getModuleCount(),b=0,d=0;d<c;d++)for(var e=0;e<c;e++){for(var g=0,h=a.isDark(d,e),i=-1;1>=i;i++)if(!(0>d+i||c<=d+i))for(var j=-1;1>=j;j++)0>e+j||c<=e+j||0==i&&0==j||h==a.isDark(d+i,e+j)&&g++;5<g&&(b+=3+g-5)}for(d=0;d<c-1;d++)for(e=0;e<c-1;e++)if(g=0,a.isDark(d,e)&&g++,a.isDark(d+1,e)&&g++,a.isDark(d,e+1)&&g++,a.isDark(d+1,e+1)&&g++,0==g||4==g)b+=3;for(d=0;d<c;d++)for(e=0;e<c-6;e++)a.isDark(d,e)&&a.isDark(d,e+1)&&a.isDark(d,e+2)&&a.isDark(d,e+3)&&a.isDark(d,e+4)&&(!a.isDark(d,e+5)&&!a.isDark(d,e+6)&&b+=40);for(e=0;e<c;e++)for(d=0;d<c-6;d++)a.isDark(d,e)&&a.isDark(d+1,e)&&a.isDark(d+2,e)&&a.isDark(d+3,e)&&a.isDark(d+4,e)&&(!a.isDark(d+5)&&!a.isDark(d+6)&&b+=40);for(e=0;e<c;e++)for(d=0;d<c;d++)a.isDark(d,e)&&b++;a=Math.abs(100*b/c/c-50)/5;return b+10*a}};g.prototype={get:function(a){return 1==(this.buffer[Math.floor(a/8)]>>>7-a%8&1)},put:function(a,c){for(var b=0;b<c;b++)this.putBit(1==(a>>>c-b-1&1))},getLengthInBits:function(){return this.length},putBit:function(a){var c=Math.floor(this.length/8);this.buffer.length<=c&&this.buffer.push(0);a&&(this.buffer[c]|=128>>>this.length%8);this.length++}};var e={glog:function(a){if(1>a)throw Error("glog("+a+")");return e.LOG_TABLE[a]},gexp:function(a){for(;0>a;)a+=255;for(;256<=a;)a-=255;return e.EXP_TABLE[a]},EXP_TABLE:Array(256),LOG_TABLE:Array(256)};for(var m=0;256>m;m++)e.EXP_TABLE[m]=m<8?1<<m:e.EXP_TABLE[m-4]^e.EXP_TABLE[m-5]^e.EXP_TABLE[m-6]^e.EXP_TABLE[m-8],e.LOG_TABLE[e.EXP_TABLE[m]]=m;function g(){this.buffer=[];this.length=0}k.RS_BLOCK_TABLE=[[1,26,19],[1,26,16],[1,26,13],[1,26,9],[1,44,34],[1,44,28],[1,44,22],[1,44,16],[1,70,55],[1,70,44],[2,35,17],[2,35,13],[2,50,24],[2,50,18],[2,50,14],[2,50,11],[1,80,64],[2,32,24],[2,43,15],[4,22,9],[2,32,11],[4,22,15],[4,22,13],[4,22,11],[2,86,68],[4,43,27],[4,43,19],[4,43,15],[2,98,78],[4,49,31],[2,32,14],[4,39,13],[2,121,97],[2,60,38],[4,40,18],[4,40,14],[2,146,116],[3,58,36],[4,36,16],[4,36,12],[2,86,68],[4,69,43],[6,43,19],[6,43,15],[4,101,81],[1,80,50],[4,50,22],[3,36,12],[2,116,92],[6,58,36],[4,36,20],[7,42,14],[4,133,107],[8,59,37],[8,44,20],[12,33,11],[3,145,115],[4,64,40],[11,36,16],[11,36,12],[5,109,87],[5,65,41],[5,54,24],[11,36,12],[5,122,98],[7,73,45],[15,43,19],[3,45,15],[1,135,107],[10,74,46],[1,50,22],[2,42,14],[5,150,120],[9,69,43],[17,50,22],[2,42,14],[3,141,113],[3,70,44],[15,46,24],[17,42,14],[4,135,107],[17,74,46],[17,50,22],[19,46,24],[2,144,116],[7,65,41],[34,54,24],[34,42,14],[4,139,111],[4,70,44],[16,50,22],[16,50,22],[6,146,116],[6,58,36],[14,46,24],[14,46,24],[8,151,121],[8,59,37],[32,54,24],[32,54,24],[10,147,117],[19,75,47],[22,54,24],[22,54,24],[8,132,106],[22,73,45],[33,54,24],[33,54,24],[3,145,115],[3,74,46],[34,54,24],[34,54,24],[5,150,120],[4,75,47],[34,54,24],[34,54,24],[2,141,113],[17,74,46],[34,54,24],[34,54,24],[3,135,107],[17,75,47],[34,54,24],[34,54,24],[5,150,120],[4,75,47],[34,54,24],[34,54,24],[4,141,113],[17,74,46],[34,54,24],[34,54,24],[6,135,107],[6,75,47],[34,54,24],[34,54,24],[8,144,116],[8,75,47],[34,54,24],[34,54,24],[10,147,117],[19,75,47],[34,54,24],[34,54,24]];k.getRSBlocks=function(a,c){var b=k.getRsBlockTable(a,c);if(void 0==b)throw Error("bad rs block @ typeNumber:"+a+"/errorCorrectLevel:"+c);for(var d=b.length/3,e=[],g=0;g<d;g++)for(var h=b[3*g+0],i=b[3*g+1],j=b[3*g+2],l=0;l<h;l++)e.push(new k(i,j));return e};k.getRsBlockTable=function(a,c){switch(c){case 1:return k.RS_BLOCK_TABLE[4*(a-1)+0];case 0:return k.RS_BLOCK_TABLE[4*(a-1)+1];case 3:return k.RS_BLOCK_TABLE[4*(a-1)+2];case 2:return k.RS_BLOCK_TABLE[4*(a-1)+3];default:return void 0}};var c={};c.stringToBytes=function(a){for(var c=[],b=0;b<a.length;b++){var d=a.charCodeAt(b);c.push(128>d?d:d>2047?(224|d>>12&15,128|d>>6&63,128|d&63):(240|d>>18&7,128|d>>12&63,128|d>>6&63,128|d&63))}return c};c.createStringToBytes=function(a,c){var b=function(a){for(var b=[],d=0;d<a.length;d++)b.push(a.charCodeAt(d));return b};return function(d){for(var e=[],g=0;g<d.length;g++){var h=d.charCodeAt(g);if(65534==h||65535==h)h=0;var i=b(h);for(h=0;h<i.length;h++)e.push(i[h])}return e}};c.UTF8_STRING_TO_BYTES=function(a){return c.stringToBytes(a)};c.BYTE_MODE=0;c.MODE_NUMBER=1;c.MODE_ALPHA_NUM=2;c.MODE_8BIT_BYTE=4;c.MODE_KANJI=8;window.QRCode=i;})();

    window.addEventListener("DOMContentLoaded", function () {
      const button = document.getElementById("accession-row-print-button");
      if (button) {
        button.addEventListener("click", function () {
          window.print();
        });
      }

      const qrContainer = document.getElementById("accession-row-qr");
      const qrUrl = qrContainer ? qrContainer.dataset.url : null;

      if (qrContainer && qrUrl) {
        qrContainer.innerHTML = "";
        new QRCode(qrContainer, {
          text: qrUrl,
          width: 96,
          height: 96,
          correctLevel: QRCode.CorrectLevel.M,
        });
      }
    });
  </script>
{% endblock %}

{% block content %}
  <main class="w3-container w3-margin-top print-layout" role="main">
    <div class="print-actions" role="region" aria-label="{% trans 'Print controls' %}">
      <button
        id="accession-row-print-button"
        type="button"
        class="w3-button w3-blue w3-round"
      >
        <span class="fa-solid fa-print" aria-hidden="true"></span>
        <span class="w3-margin-left">{% trans "Print" %}</span>
      </button>
    </div>

    <article class="w3-card w3-white w3-round print-card" aria-labelledby="print-card-heading">
      <header class="print-card__header">
        <div>
          <h1 id="print-card-heading" class="print-card__title">
            {% blocktrans with suffix=accessionrow.specimen_suffix %}Specimen {{ suffix }}{% endblocktrans %}
          </h1>
          <p class="print-card__meta">{{ accessionrow.accession }}</p>
        </div>
        <div class="print-card__qr" id="accession-row-qr" data-url="{{ qr_target_url }}">
          <noscript>
            <p class="print-summary__value-muted">{% trans "Enable JavaScript to view QR code" %}</p>
          </noscript>
        </div>
      </header>

      <section class="print-card__section" aria-labelledby="print-summary-heading">
        <div class="w3-responsive">
          <table class="print-summary">
            <caption id="print-summary-heading" class="w3-hide">{% trans "Specimen summary" %}</caption>
            <tbody>
              <tr>
                <th scope="row" class="print-summary__label--narrow">{% trans "Accession number" %}</th>
                <td>{{ accessionrow.accession|default:"—" }}</td>
                <th scope="row" class="print-summary__label--narrow">{% trans "Specimen suffix" %}</th>
                <td>{{ accessionrow.specimen_suffix|default:"—" }}</td>
              </tr>
              <tr>
                <th scope="row">{% trans "Locality" %}</th>
                <td>{{ locality|default:"—" }}</td>
                <th scope="row">{% trans "Site" %}</th>
                <td>{{ site|default:"—" }}</td>
              </tr>
              <tr>
                <th scope="row">{% trans "Storage" %}</th>
                <td>{{ accessionrow.storage|default:"—" }}</td>
                <th scope="row">{% trans "Inventory status" %}</th>
                <td>
                  {% if accessionrow.get_status_display %}
                    {{ accessionrow.get_status_display }}
                  {% else %}
                    <span class="print-summary__value-muted">{% trans "Not recorded" %}</span>
                  {% endif %}
                </td>
              </tr>
              <tr>
                <th scope="row">{% trans "Family" %}</th>
                <td>{{ taxonomy_values.family|default:"—" }}</td>
                <th scope="row">{% trans "Genus" %}</th>
                <td>{{ taxonomy_values.genus|default:"—" }}</td>
              </tr>
              <tr>
                <th scope="row">{% trans "Species" %}</th>
                <td>{{ taxonomy_values.species|default:"—" }}</td>
                <th scope="row">{% trans "Qualifier" %}</th>
                <td>{{ identification_qualifier|default:"—" }}</td>
              </tr>
              {% if not has_taxonomy_values %}
                <tr>
                  <th scope="row">{% trans "Taxon" %}</th>
                  <td colspan="3">{{ taxonomy_fallback_value|default:"—" }}</td>
                </tr>
              {% endif %}
              <tr>
                <th scope="row">{% trans "Field number" %}</th>
                <td>
                  {% with field_links=accessionrow.accession.fieldslip_links.all %}
                    {% if field_links %}
                      <ul class="print-list">
                        {% for link in field_links %}
                          <li>{{ link.fieldslip.field_number|default:"—" }}</li>
                        {% endfor %}
                      </ul>
                    {% else %}
                      <span class="print-summary__value-muted">{% trans "Not recorded" %}</span>
                    {% endif %}
                  {% endwith %}
                </td>
                <th scope="row">{% trans "Elements" %}</th>
                <td>
                  <div class="w3-responsive">
                    <table class="print-elements-table">
                      <thead>
                        <tr>
                          <th scope="col">{% trans "Element" %}</th>
                          <th scope="col">{% trans "Side" %}</th>
                          <th scope="col">{% trans "Portion" %}</th>
                          <th scope="col">{% trans "Condition" %}</th>
                          <th scope="col">{% trans "Fragments" %}</th>
                        </tr>
                      </thead>
                      <tbody>
                        {% for specimen in specimen_rows %}
                          <tr>
                            <td>{{ specimen.element|default:"—" }}</td>
                            <td>{{ specimen.side|default:"—" }}</td>
                            <td>{{ specimen.portion|default:"—" }}</td>
                            <td>{{ specimen.condition|default:"—" }}</td>
                            <td>{{ specimen.fragments|default_if_none:"—" }}</td>
                          </tr>
                        {% empty %}
                          <tr>
                            <td colspan="5" class="print-summary__value-muted">{% trans "No specimen elements recorded." %}</td>
                          </tr>
                        {% endfor %}
                      </tbody>
                    </table>
                  </div>
                </td>
              </tr>
            </tbody>
          </table>
        </div>
      </section>
    </article>
  </main>
{% endblock %}
