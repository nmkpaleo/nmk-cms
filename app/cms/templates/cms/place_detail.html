{% extends "base_generic.html" %}
{% load user_tags %}

{% block title %}Place {{ place.name }}{% endblock %}

{% block content %}
<div class="template-detail-container">
    <div class="template-detail-header">
        <h2 class="template-detail-h2">Place Detail</h2>
        {% if user.is_superuser or user|has_group:"Collection Managers" %}
        <a href="{% url 'place_edit' place.pk %}" class="edit-icon">Edit Form ✏️</a>
        {% endif %}
    </div>
    <div class="grid-container">
        <div class="card">
            <p><strong>Name:</strong> <br> {{ place.name }}</p>
            <p><strong>Type:</strong> <br> {{ place.get_place_type_display }}</p>
            <p><strong>Locality:</strong> <br> {{ place.locality.abbreviation }}</p>
            <p><strong>Higher Geography:</strong> <br> {{ place.part_of_hierarchy }}</p>
            {% if place.description %}
            <p><strong>Description:</strong> <br> {{ place.description }}</p>
            {% endif %}
            {% if place.comment %}
            <p><strong>Comment:</strong> <br> {{ place.comment }}</p>
            {% endif %}
        </div>
        {% if children %}
        <div class="card">
            <p><strong>Lower Geography:</strong> <br>
            {% for child in children %}
                <a href="{% url 'place_detail' child.pk %}">{{ child.name }}</a>{% if not forloop.last %}, {% endif %}
            {% endfor %}
            </p>
        </div>
        {% endif %}
        {% if place.related_place %}
        <div class="card">
            <p><strong>Relation:</strong> <br> {{ place.get_relation_type_display }} → {{ place.related_place.name }}</p>
        </div>
        {% endif %}
    </div>
</div>
{% endblock %}
