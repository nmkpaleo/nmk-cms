{% extends "base_generic.html" %}

{% block content %}
        <div class="accession_detail_container">
            <div class="accession_detail_header">
                <h2 class="accession_detail_h2">Accession Detail</h2>
            </div>
            <div class="grid-container">
                <!-- Accession Card -->
                <div class="card">
                    <p><strong>Specimen prefix: </strong> <br> {{ accession.collection.abbreviation }}</p>
                    <p><strong>Accession number: </strong> <br> {{ accession.specimen_no }}</p>
                </div>
                <div class="lists_table">
                    {% for row in accession.accessionrow_set.all %}
                <!-- Make this list below the Accession details as a Table. Also, add the storage field to the list -->
                <div class="card">
                            <p><strong>Suffix: </strong> <br> {{ row.specimen_suffix }}</p>
                        </div>
                    {% endfor %}
                </div>
            </div>

            <div class="media_table"></div>
                <h2>Related Media</h2>
                {% if user.is_authenticated and user.groups.all.0.name == "Collection Managers" %}
                    <a href="{% url 'upload-media' accession.id %}">âž• Upload Media</a>
                {% endif %}
                {% if accession.media.all %}
                    <ul>
                        {% for media in accession.media.all %}
                            <li>
                                <strong>{{ media.file_name }}</strong> ({{ media.type }}) <br>
                                {% if media.media_location %}
                                    <a href="{{ media.media_location.url }}" target="_blank">
                                        {% if media.type == "photo" %}
                                            <img src="{{ media.media_location.url }}" alt="{{ media.file_name }}" width="150">
                                        {% else %}
                                            View File
                                        {% endif %}
                                    </a>
                                {% endif %}
                                <br>License: {{ media.get_license_display }}
                            </li>
                        {% endfor %}
                    </ul>
                {% else %}
                    <p>No media files available for this accession.</p>
                {% endif %}
            </div>
        </div>

{% endblock %}


