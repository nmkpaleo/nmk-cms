{% extends "base_generic.html" %}

{% block title %}Specimen {{ accessionrow.specimen_suffix }}{% endblock %}

{% block content %}
<div class="template-detail-container">
  <div class="grid-container">
    <div class="card">
      <div class="section-header" style="display:flex;align-items:center;justify-content:space-between;gap:1rem;flex-wrap:wrap;">
        <h2 class="section-title" style="margin:0;">Specimen Detail</h2>
        {% if can_edit %}
        <a href="{% url 'accessionrow_edit' accessionrow.pk %}" class="w3-button w3-blue w3-round">
          <i class="fa-solid fa-pen-to-square"></i>
          Edit Specimen Detail
        </a>
        {% endif %}
      </div>

      <table>
        <tbody>
          <tr>
            <th>Accession:</th>
            <td>{{ accessionrow.accession }}</td>
          </tr>
          <tr>
            <th>Specimen Suffix:</th>
            <td>{{ accessionrow.specimen_suffix }}</td>
          </tr>
          <tr>
            <th>Storage:</th>
            <td>{{ accessionrow.storage }}</td>
          </tr>
          {% if show_inventory_status %}
          <tr>
            <th>Inventory Status:</th>
            <td>{{ accessionrow.get_status_display|default:"Not recorded" }}</td>
          </tr>
          {% endif %}
        </tbody>
      </table>

      <div class="section-header" style="display:flex;align-items:center;justify-content:space-between;gap:1rem;flex-wrap:wrap;">
        <h2 class="section-title" style="margin:0;">Elements</h2>
        {% if can_manage %}
        <a href="{% url 'accessionrow_add_specimen' accessionrow.id %}" class="w3-button w3-blue w3-round">
          <i class="fa-solid fa-plus"></i>
          Add Element
        </a>
        {% endif %}
      </div>

      <table>
        <tr>
          <th>Element</th>
          <th>Side</th>
          <th>Condition</th>
          <th>Description</th>
          <th>Portion</th>
          <th>Fragments</th>
        </tr>
        {% for specimen in natureofspecimens %}
        <tr>
          <td>{{ specimen.element }}</td>
          <td>{{ specimen.side }}</td>
          <td>{{ specimen.condition }}</td>
          <td>{{ specimen.verbatim_element }}</td>
          <td>{{ specimen.portion }}</td>
          <td>{{ specimen.fragments }}</td>
        </tr>
        {% empty %}
        <tr>
          <td colspan="6" class="w3-center">No elements recorded.</td>
        </tr>
        {% endfor %}
      </table>

      <div class="section-header" style="display:flex;align-items:center;justify-content:space-between;gap:1rem;flex-wrap:wrap;margin-top:1.5rem;">
        <h2 class="section-title" style="margin:0;">Identification</h2>
        {% if can_manage %}
        <a href="{% url 'accessionrow_add_identification' accessionrow.id %}" class="w3-button w3-blue w3-round">
          <i class="fa-solid fa-plus"></i>
          Add Identification
        </a>
        {% endif %}
      </div>
      <table>
        <tr>
          <th>Identified by</th>
          <th>Date</th>
          <th>Verbatim identification</th>
          <th>Taxon</th>
          <th>Qualifier</th>
          <th>Remarks</th>
          <th>Reference</th>
        </tr>
        {% for identification in identifications %}
        <tr>
          <td>{{ identification.identified_by }}</td>
          <td>{{ identification.date_identified }}</td>
          <td>{{ identification.verbatim_identification }}</td>
          <td>{{ identification.taxon }}</td>
          <td>{{ identification.identification_qualifier }}</td>
          <td>{{ identification.identification_remarks }}</td>
          <td>{{ identification.reference }}</td>
        </tr>
        {% empty %}
        <tr>
          <td colspan="7" class="w3-center">No identifications recorded.</td>
        </tr>
        {% endfor %}
      </table>
      <a href="{% url 'accession_detail' accessionrow.accession.id %}">Back to Accession</a>
    </div>
  </div>
</div>

{% endblock %}


