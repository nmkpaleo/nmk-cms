{% extends "admin/base_site.html" %}
{% load i18n %}

{% block nav-global %}{% endblock %}

{% block content_title %}{{ title }}{% endblock %}

{% block content %}
<div class="content">
  <p>{% trans "Select which record should receive the merged data. The remaining records will be merged into the chosen target." %}</p>

  <form method="post">
    {% csrf_token %}
    <input type="hidden" name="action" value="{{ action_name }}">
    <input type="hidden" name="merge_confirmed" value="yes">
    {% if select_across %}
      <input type="hidden" name="select_across" value="{{ select_across }}">
    {% endif %}

    <table class="adminlist">
      <thead>
        <tr>
          <th scope="col">{% trans "Target" %}</th>
          <th scope="col">{% trans "Record" %}</th>
          {% for column in preview_columns %}
            <th scope="col">{{ column|capfirst }}</th>
          {% endfor %}
        </tr>
      </thead>
      <tbody>
        {% for row in object_rows %}
          <tr>
            <td>
              <label>
                <input type="radio" name="{{ merge_target_field }}" value="{{ row.object.pk }}" required>
              </label>
            </td>
            <td>{{ row.label }}</td>
            {% for value in row.preview_values %}
              <td>{{ value }}</td>
            {% endfor %}
          </tr>
        {% endfor %}
      </tbody>
    </table>

    <div hidden>
      {% for obj in objects %}
        <input type="hidden" name="{{ action_checkbox_name }}" value="{{ obj.pk }}">
      {% endfor %}
    </div>

    <div class="submit-row">
      <button type="submit" class="button button-primary">{% trans "Merge records" %}</button>
      <a href="{{ changelist_url }}" class="button cancel-link">{% trans "Cancel" %}</a>
    </div>
  </form>
</div>
{% endblock %}
